<div>
  <!-- top panel -->
  <div class="container form-inline top-panel">
    <input id="cohortName" type="text"
           class="form-control save-input"
           placeholder="Specify cohort name"
           (drop)="preventNodeDrop($event)"
           [(ngModel)]="cohortName">
    <button class="btn btn-outline-primary btn-sm save-btn"
            (click)="saveCohort()"
            type="button">
      <span *ngIf="isSavingCohortCompleted">Save cohort</span>
      <span *ngIf="!isSavingCohortCompleted">Saving...</span>
    </button>

    <button type="button"
            (click)="update($event)"
            class="btn btn-outline-primary btn-sm update-btn
                      {{isDirty? 'update-btn-dirty' : ''}}">
      <span *ngIf="isUpdating">Updating cohort...</span>
      <span *ngIf="!isUpdating">Update cohort</span>
    </button>

  </div>

  <div class="float-right" style="margin-right: 2em">
    <button type="button" (click)="importCriteria()"
            class="btn btn-primary btn-sm gb-data-selection-control-btn">Import Criteria
    </button>
    <input [id]="fileElementId"
           type="file"
           style="display: none"/>
  </div>
  <div class="gb-cohort-selection-header">
    Define a cohort
    <i class="fa fa-info" (mouseenter)="op.show($event)" (mouseleave)="op.hide($event)"></i>
  </div>

  <!-- cohort query composer -->
  <div>
    <!-- Inclusion criteria -->
    <div #inclusionCriteriaBox class="criteria-box">

      <div class="subject-count-box">
        <span><b>Inclusion</b> criteria: </span>
        <span>{{inclusionSubjectCount}} subjects included.</span>
      </div>
      <gb-constraint #rootInclusionConstraintComponent
                     [constraint]="rootInclusionConstraint"
                     [isRoot]="true"></gb-constraint>
    </div>

    <!-- Exclusion criteria -->
    <div #exclusionCriteriaBox class="criteria-box">
      <div class="subject-count-box">
        <span><b>Exclusion</b> criteria: </span>
        <span>{{exclusionSubjectCount}} subjects excluded.</span>
      </div>
      <gb-constraint #rootExclusionConstraintComponent
                     [constraint]="rootExclusionConstraint"
                     [isRoot]="true"></gb-constraint>
    </div>


    <!-- Intersection calculation -->
    <div class="subject-count-box">
      <span><b>Total: </b></span>
      <span>{{subjectCount}} subjects match your selection.</span>
    </div>

  </div>

  <p-overlayPanel #op
                  [dismissable]="true"
                  [showCloseIcon]="false"
                  [style]="{'background':'#339C90', 'width': '50%'}">
    <div class="gb-cohort-selection-information-text">
      To define a cohort for which you want to select data,
      either drag nodes from the tree into an "add criteria" box or use the "+" icon to
      add criteria to your selection. When you are done adding criteria, please click the “Update” button on the right
      to get feedback about your group size, or to submit your selection before advancing.
    </div>
  </p-overlayPanel>


</div>
